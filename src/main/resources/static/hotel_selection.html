<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hotel Selection</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <style>
    body { background: #f6f9fc; font-family: 'Nunito', sans-serif; padding: 30px; }
    h2 { text-align: center; margin-bottom: 30px; color: #333; }
    .card { border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .card:hover { transform: scale(1.02); }
    .btn-primary { background-color: #007bff; border: none; }
    .btn-primary:hover { background-color: #0069d9; }
  </style>
</head>
<body>

<h2>Choose Your Hotel ğŸ¨</h2>
<div id="hotel-container" class="row g-4"></div>

<script>
async function loadHotels() {
  const urlParams = new URLSearchParams(window.location.search);
  const budget = parseFloat(urlParams.get('budget'));
  const to = urlParams.get('to');
  const days = parseInt(urlParams.get('days'));
  const date = urlParams.get('date');

  // Mock hotel data ğŸ’¡
  const mockHotels = [
    { name: "Sunrise Resort", location: to, pricePerNight: 2000, rating: 4.2 },
    { name: "Blue Lagoon Suites", location: to, pricePerNight: 3500, rating: 4.5 },
    { name: "City Comfort Inn", location: to, pricePerNight: 2500, rating: 4.0 },
    { name: "Luxury Stay Grand", location: to, pricePerNight: 6000, rating: 4.8 },
    { name: "Budget Bliss Lodge", location: to, pricePerNight: 1500, rating: 3.9 }
  ];

  const totalBudget = budget;
  const filteredHotels = mockHotels.filter(h => h.pricePerNight * days <= totalBudget);

  const container = document.getElementById('hotel-container');
  container.innerHTML = '';

  if (filteredHotels.length === 0) {
    container.innerHTML = `<p class="text-center mt-4">No hotels available within â‚¹${totalBudget.toFixed(2)} ğŸ˜¢</p>`;
    return;
  }

  filteredHotels.forEach(hotel => {
    const totalCost = hotel.pricePerNight * days;
    const card = document.createElement('div');
    card.className = 'col-md-4';
    card.innerHTML = `
      <div class="card p-3">
        <h5>${hotel.name}</h5>
        <p>ğŸ“ ${hotel.location}</p>
        <p>â­ ${hotel.rating} / 5</p>
        <p>ğŸ’¸ â‚¹${hotel.pricePerNight}/night</p>
        <p>ğŸ§¾ Total (${days} nights): â‚¹${totalCost}</p>
        <button class="btn btn-primary w-100" 
          onclick="bookHotel('${hotel.name}', '${hotel.location}', ${totalCost}, '${date}')">
          Book Hotel
        </button>
      </div>
    `;
    container.appendChild(card);
  });
}

function bookHotel(name, location, cost, date) {
  alert(`âœ… Hotel booked successfully!
ğŸ¨ ${name}
ğŸ“ ${location}
ğŸ—“ï¸ ${date}
ğŸ’° Total Cost: â‚¹${cost}`);

  // Redirect to final confirmation page (or dashboard)
  window.location.href = '/under_progress.html';
}

window.onload = loadHotels;
</script>
</body>
</html>
